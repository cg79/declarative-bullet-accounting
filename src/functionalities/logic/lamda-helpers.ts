import { getYMD } from "../transactions/helpers/accounting_helpers";
import {
  ACTIONS_ENUM,
  IAccountingValues,
} from "../transactions/model/accounting_types";

const SALARIES = [
  {
    _id: "6615066db8f89f74a289ddf5",
    nume: "Salar",
    value: 3300,
    description: "Salar",
    date: "2023-10-01T14:11:17.000Z",
    impozit_venit: 0,
    scutire_impozit: 0,
    year: 2023,
    month: 10,
    day: 1,
    addedms: 1712653933374,
    userid: "6614fe81b8f89f74a289dde9",
  },
  {
    _id: "6615066db8f89f74a289ddf6",
    nume: "Salar",
    value: 3000,
    description: "Salar",
    date: "2023-01-01T15:10:28.000Z",
    impozit_venit: 0,
    scutire_impozit: 200,
    year: 2023,
    month: 1,
    day: 1,
    addedms: 1712653933374,
    userid: "6614fe81b8f89f74a289dde9",
  },
  {
    _id: "6615066db8f89f74a289ddf7",
    nume: "Salar",
    value: 2550,
    description: "Salar",
    date: "2022-01-01T11:49:16.000Z",
    impozit_venit: 0,
    scutire_impozit: 0,
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712653933374,
    userid: "6614fe81b8f89f74a289dde9",
  },
  {
    _id: "6615066db8f89f74a289ddf8",
    nume: "Salar",
    value: 2300,
    description: "Salar",
    date: "2021-01-01T15:09:50.000Z",
    impozit_venit: 0,
    scutire_impozit: 0,
    year: 2021,
    month: 1,
    day: 1,
    addedms: 1712653933374,
    userid: "6614fe81b8f89f74a289dde9",
  },
];

const COUNTRY_TAXES = [
  {
    _id: "66179e71024ad05944bed5fc",
    nume: "TaxaProfit",
    value: 0.01,
    description: "Taxa Profit",
    date: "2022-01-01T11:25:18.000Z",
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
  },
  {
    _id: "66179e71024ad05944bed5fd",
    nume: "Dividende",
    value: 0.05,
    description: "Dividende",
    date: "2022-01-01T11:26:00.000Z",
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704813166149,
    updatedBy: "659acb96673ae701f96ae7c6",
  },
  {
    _id: "66179e71024ad05944bed5fe",
    nume: "TaxaAsigurareMunca",
    value: 0.0225,
    description: "Taxa Asigurare Munca",
    date: "2022-01-01T11:27:00.000Z",
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704925139935,
    updatedBy: "659ed76c224b5954c505fe84",
  },
  {
    _id: "66179e71024ad05944bed5ff",
    nume: "TaxaSanatate",
    value: 0.1,
    description: "Taxa Sanatate",
    date: "2022-01-01T11:27:04.000Z",
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704925157890,
    updatedBy: "659ed76c224b5954c505fe84",
  },
  {
    _id: "66179e71024ad05944bed600",
    nume: "TaxaPensie",
    value: 0.25,
    description: "Taxa Pensie",
    date: "2022-01-01T11:27:06.000Z",
    year: 2022,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704925164343,
    updatedBy: "659ed76c224b5954c505fe84",
  },
  {
    _id: "66179e71024ad05944bed601",
    nume: "TVA",
    value: 0.19,
    description: "TVA",
    date: "2023-01-01T18:24:44.000Z",
    year: 2023,
    month: 1,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704799600229,
    updatedBy: "659acb96673ae701f96ae7c6",
  },
  {
    _id: "66179e71024ad05944bed602",
    nume: "Dividende",
    value: 0.08,
    description: "Dividende",
    date: "2023-10-01T17:44:31.000Z",
    year: 2023,
    month: 10,
    day: 1,
    addedms: 1712823921911,
    userid: "6614fe81b8f89f74a289dde9",
    modifiedms: 1704813214442,
    updatedBy: "659acb96673ae701f96ae7c6",
  },
];

const PREVIOUS_CASA = {
  guid: "31ef10b0-bab4-77a8-b9db-551e48fa8374",
  numar: 0,
  taxe: {
    pensie: 0,
    sanatate: 0,
    munca: 0,
    dividende: 0,
    tva: 0,
    taxa_profit: 0,
    total: 0,
    tva_deductibil: 0,
  },
  casa: { firma: -29, cont_personal: 0, disponibil: 0 },
  salar: { value: 0 },
  taxeTrezorerie: 0,
  plati: {},
  salar_brut: 3300,
  taxe_aplicate: { put: "here" },
};

// const accountingRequest = {
//   value: 29,
//   operationid: 11,
//   data: { an: 2024, luna: 1, zi: 1 },
//   datetime: "2023-12-31T22:00:00.000Z",
//   dataTranzactie: { an: 2024, luna: 1, zi: 1 },
//   dateTimeFactura: "2023-12-31T22:00:00.000Z",
//   description: "pachet izinelimitat in reteaua bt;ref%3a c13iz56223010255 ",
// };

function prepareNewAccountingAction(
  vals: { operationid: ACTIONS_ENUM; value: number },
  accountValues: IAccountingValues
) {
  // const accountingRequest = {
  //   value: vals.value,
  //   datetime: new Date(),
  //   operationid: vals.operationid,
  //   description: "",
  //   data: getYMD(new Date()),
  //   dataTranzactie: getYMD(new Date()),
  //   dateTimeFactura: new Date(),
  // };
  const p1 = {
    salaries: SALARIES,
    country_taxes: COUNTRY_TAXES,
    previous_casa: accountValues || PREVIOUS_CASA,
  };

  const p2 = {
    value: vals.value,
    datetime: new Date(),
    operationid: vals.operationid,
    description: "",
    data: getYMD(new Date()),
    dataTranzactie: getYMD(new Date()),
  };
  const response = [p1, { accountingRequest: p2 }];
  return response;
}

export { prepareNewAccountingAction };
